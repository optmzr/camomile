syntax = "proto3";
package packet;

message Packet {
  bytes packet_id = 1;
  bytes sender_id = 2;
  oneof payload {
    Ping ping = 3;
    Pong pong = 4;
    Store store = 5;
    Value value = 6;
    FindNode find_node = 7;
    FindValue find_value = 8;
    NodeList node_list = 9;
  }
}

message Ping {
  bytes challenge = 1;
}
message Pong {
  bytes challenge = 1;
}

message Store {
  bytes key = 1;
  string value = 2;
}

message Value {
  bytes key = 1;
  string value = 2;
}

message FindValue {
  bytes key = 1;
}

message FindNode {
  bytes node_id = 1;
}

message NodeInfo {
  bytes node_id = 1;
  bytes ip = 2;
  uint32 port = 3;
}

message NodeList {
  repeated NodeInfo nodes = 1;
}

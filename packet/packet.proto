syntax = "proto3";
package packet;

message Packet {
  bytes session_id = 1;
  bytes sender_id = 2;
  uint32 sender_port = 3;
  oneof payload {
    Ping ping = 4;
    Pong pong = 5;
    Store store = 6;
    Value value = 7;
    FindNode find_node = 8;
    FindValue find_value = 9;
    NodeList node_list = 10;
  }
}

message Ping {
  bytes challenge = 1;
}
message Pong {
  bytes challenge = 1;
}

message Store {
  bytes key = 1;
  string value = 2;
}

message Value {
  bytes key = 1;
  string value = 2;
  NodeList node_list = 3;
}

message FindValue {
  bytes key = 1;
}

message FindNode {
  bytes node_id = 1;
}

message NodeInfo {
  bytes node_id = 1;
  bytes ip = 2;
  uint32 port = 3;
}

message NodeList {
  repeated NodeInfo nodes = 1;
}
